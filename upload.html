<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Start your pack ‚Äî Frankiemoji</title>
<meta name="description" content="Upload a selfie, pick your expressions, and start your hand-drawn emoji pack.">
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<!-- build: v8.3.2 -->

<style>
:root{--cream:#FAF3E0;--espresso:#2C2419;--graphite:#5F5B53;--amber:#F0C06C;--accent:#D8742B;--paper:#F8EED1;}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--cream);color:var(--espresso);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif}
h1,h2,h3{font-family:"DM Serif Display",Georgia,serif}
img{display:block;max-width:100%}
.container{max-width:1200px;margin:0 auto;padding:0 24px}

/* Buttons */
.btn{display:inline-block;border:1px solid transparent;padding:12px 18px;border-radius:12px;background:#fff;color:var(--espresso);font-weight:600;cursor:pointer;transition:transform .12s ease}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:var(--accent);color:#fff}

/* Page */
.header{padding:20px 0}
.header .container{display:flex;justify-content:space-between;align-items:center}
.header a{color:var(--espresso);text-decoration:none;font-weight:600}
.main{padding:24px 0 48px}
.meta{background:#fff7e6;border:1px solid #eee;padding:12px 14px;border-radius:12px;margin-bottom:16px}
.footer{padding:28px 0;border-top:1px solid #eee}
.footer .container{display:flex;align-items:center;justify-content:space-between}
.links a{color:var(--espresso);text-decoration:none;margin-left:16px}
</style>
</head>

<body>
  <!-- Simple header -->
  <header class="header">
    <div class="container">
      <a href="index.html">‚Üê Back to home</a>
      <strong>Frankiemoji</strong>
    </div>
  </header>

  <main class="main">
    <section id="u-root" class="container" style="max-width:560px;">
      <h1 style="margin:0 0 8px;">Upload your selfie</h1>
      <p style="opacity:.8;margin:0 0 16px;">Clear, front-facing, good lighting works best.</p>

      <div class="meta">
        <div><strong>Selected pack:</strong> <span id="u-pack">‚Äî</span></div>
        <div><strong>Email:</strong> <span id="u-email">‚Äî</span></div>
      </div>

      <div id="u-form">
        <label style="display:block;margin-bottom:8px;font-weight:600;">Choose a photo</label>

        <!-- Uploadcare picker -->
        <input
          id="u-file"
          type="hidden"
          role="uploadcare-uploader"
          data-clearable=""
          data-tabs="file camera"
          data-images-only="true"
          data-multiple="false"
          data-preview-step="true"
          style="margin-bottom:14px;"
        />

        <!-- Live preview -->
        <div id="u-preview-wrap" style="display:none;margin:10px 0 16px;">
          <img id="u-preview" alt="preview" style="max-width:100%;border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.08);" />
        </div>

        <div style="display:flex;gap:10px;">
          <a class="btn" href="index.html" style="flex:1;text-align:center;">Back</a>
          <button id="u-submit" class="btn primary" style="flex:1;">Send</button>
        </div>
      </div>

      <div id="u-done" style="display:none;text-align:center;padding:24px 12px;">
        <h2 style="margin:0 0 8px;">All set üéâ</h2>
        <p style="opacity:.85;margin:0 0 12px;">We saved your details and selfie. You‚Äôll hear from us soon.</p>
        <div style="display:flex;gap:10px;justify-content:center;">
          <a class="btn" href="index.html">Make another pack</a>
          <a class="btn" href="our-story.html">About Frankiemoji</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>Born with Paper and Pencil. Evolved with Technology.</p>
      <div class="links">
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
        <a href="mailto:hello@example.com">Contact</a>
      </div>
    </div>
  </footer>

  <!-- Uploadcare widget (demo key; replace with your real public key later) -->
  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>
  <script>window.UPLOADCARE_PUBLIC_KEY='demopublickey';</script>

  <script>
  (function () {
    function qs(sel){ return document.querySelector(sel); }
    function getPack(){
      const p = new URLSearchParams(location.search).get('pack');
      return (p && ['starter','standard','premium'].includes(p)) ? p : 'standard';
    }

    const root   = qs('#u-root');
    const emailEl= qs('#u-email');
    const packEl = qs('#u-pack');
    const prevW  = qs('#u-preview-wrap');
    const prev   = qs('#u-preview');
    const submit = qs('#u-submit');
    const formUI = qs('#u-form');
    const doneUI = qs('#u-done');

    // read data saved on index (email)
    let start = {};
    try { start = JSON.parse(localStorage.getItem('franki:start') || '{}'); } catch (_) {}
    const pack = getPack();
    packEl.textContent  = pack.charAt(0).toUpperCase() + pack.slice(1);
    emailEl.textContent = start?.email ? start.email : 'Not provided';

    // Uploadcare widget hookup
    const input = qs('#u-file');
    let filePromise = null;

    function showPreviewFromCdn(cdnUrl){
      if (!cdnUrl) { prevW.style.display = 'none'; return; }
      prev.src = cdnUrl + '-/preview/800x800/-/quality/smart/';
      prevW.style.display = 'block';
    }

    function boot(){
      if (typeof uploadcare === 'undefined') return;
      const widget = uploadcare.Widget(input);

      widget.onChange(function (file) {
        filePromise = file || null;
        if (!file) { showPreviewFromCdn(''); return; }
        file.done(function (info) {
          showPreviewFromCdn(info.cdnUrl);
          try {
            localStorage.setItem('franki:upload', JSON.stringify({
              email: start.email || '',
              pack,
              cdnUrl: info.cdnUrl,
              uuid: info.uuid,
              size: info.size,
              name: info.name,
              mime: info.mimeType
            }));
          } catch (_) {}
        });
      });
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', boot);
    } else {
      boot();
    }

    // Send button
    submit.addEventListener('click', function (e) {
      e.preventDefault();
      if (!filePromise) { alert('Please choose a photo first.'); return; }
      filePromise.done(function (info) {
        if (!info || !info.cdnUrl) { alert('Upload is still processing.'); return; }
        formUI.style.display = 'none';
        doneUI.style.display = 'block';
        root.scrollIntoView({behavior: 'smooth'});
      });
    });
  })();
  </script>
</body>
</html>
